# 華容道 Klotski

經典滑塊解謎遊戲 - 幫助曹操從華容道逃脫！

## 遊戲說明

華容道是一種古老的中國滑塊解謎遊戲，源自三國時期的故事。遊戲的目標是移動滑塊，讓代表曹操的大方塊從底部中央的出口逃脫。

### 棋子介紹

| 棋子 | 大小 | 顏色 | 說明 |
|------|------|------|------|
| 曹操 | 2×2 | 紅色 | 主角，需要從出口逃脫 |
| 關羽 | 2×1 | 金色 | 橫向將領 |
| 張飛、趙雲、馬超、黃忠 | 1×2 | 綠色 | 縱向將領 |
| 兵 | 1×1 | 藍色 | 小兵 |

### 操作方式

**桌面版：**
- 拖動滑塊移動
- 點擊滑塊選中後，使用方向鍵移動
- Tab 鍵切換選中的滑塊

**行動版：**
- 觸控拖動滑塊移動

### 棋局

遊戲內建 10 種經典棋局，難度各異：

1. **橫刀立馬** - 最經典的棋局，最少需要 81 步
2. **指揮若定** - 需要 70 步
3. **將擁曹營** - 需要 72 步
4. **齊頭並進** - 較簡單，需要 60 步
5. **兵分三路** - 需要 73 步
6. **層層設防** - 較難，需要 84 步
7. **插翅難飛** - 需要 62 步
8. **守口如瓶** - 較難，需要 100 步
9. **近在咫尺** - 曹操起始位置在底部，需要 100 步
10. **走投無路** - 曹操起始位置在角落，需要 81 步

## 技術實現

### 技術棧
- **語言**: TypeScript
- **渲染**: DOM + CSS
- **狀態管理**: 純函數式設計

### 核心演算法

1. **碰撞檢測**: 使用佔用網格 (occupancy grid) 判斷滑塊是否可以移動
2. **移動驗證**: 檢查邊界條件和其他滑塊位置
3. **勝利條件**: 當曹操位於出口位置 (x:1, y:3) 時獲勝

### 檔案結構

```
game-005-klotski/
├── index.html      # 主頁面
├── main.ts         # 主程式入口，UI 渲染與事件處理
├── game.ts         # 遊戲核心邏輯
├── i18n.ts         # 多語言翻譯 (16 種語言)
├── styles.css      # 樣式表
├── manifest.json   # PWA manifest
└── README.md       # 本文件
```

## 特色功能

- 10 種經典棋局
- 16 種語言支援
- 撤銷功能
- 最佳紀錄保存
- 觸控友善設計
- 響應式佈局
- 木紋邊框視覺效果

## 多語言支援

- 繁體中文、簡體中文
- English、日本語、한국어
- Español、Français、Deutsch、Português、Italiano
- Русский、ไทย、Tiếng Việt、Bahasa Indonesia
- العربية、हिन्दी

## 遊戲截圖

```
┌────────────────────┐
│  ┌──────┐ ┌──────┐ │
│  │ 張飛 │ │ 曹操 │ │
│  │      │ │      │ │
│  ├──────┤ │      │ │
│  │ 馬超 │ ├──────┤ │
│  │      │ │ 關羽 │ │
│  ├──────┤ ├──┬──┤ │
│  │  兵  │ 兵│兵 │ │
│  └──────┴──┴──┴──┘ │
│      ═══出口═══     │
└────────────────────┘
```

## 歷史背景

華容道的故事來自《三國演義》：赤壁之戰後，曹操大敗，經華容道撤退。關羽奉命在此攔截，但念及曹操昔日恩情，最終放走了曹操。這個故事後來演變成了這個經典的滑塊解謎遊戲。

## 授權

MIT License
